# wheel_odometry
## パッケージ概要
ルンバ（Roomba）のような差動二輪ロボット（対向二輪ロボット）のホイールオドメトリを出力するシンプルなROSパッケージです。<br>
左右それぞれのエンコーダのカウント値を受け取り、ROSの ***nav_msgs/Odometry*** 形式でオドメトリを出力します。
<br>
<br>
<br>

## デモ動画
対向二輪ロボットの例として、車輪型倒立振子を使用しています。
以下のように、倒立振子の左右のモータエンコーダの情報を受け取り、ホイールオドメトリを計算して出力します。
出力結果はrviz上にて確認が可能です。
<br>
<br>
<br>

## 動作確認済みの環境
以下の環境で動作確認しています:
  * Ubuntu16.04
  * python2.7.12
  * ROS kinetic kame
　* エンコーダ付ギヤードモータ：servo city
<br>
<br>
<br>

## インストール(catkin_wsという名前のディレクトリで作業している場合)
`   $ cd ~/catkin_ws/src`<br>
`   $ git clone git@github.com:KTD-prototype/wheel_odometry.git`<br>
`   $ cd ~/catkin_ws`<br>
`   $ catkin_make`
<br>
<br>
<br>


## 使い方
### エンコーダ情報の送信
このモジュールは ***Encoder_2wheel*** というメッセージ型で ***left_encoder*** と ***right_encoder*** の２つのエンコーダ情報をメッセージとして受けとり、ホイールオドメトリの計算をします。
使用したい対向二輪ロボットの左右エンコーダ情報を ***Encoder_2wheel*** 型としてパブリッシュするように設定してください。
本モジュールの ***scripts/wheel_odometry_2wheel.py*** と、エンコーダ情報をパブリッシュするノードを立ち上げれば、本モジュールがエンコーダ情報をサブスクライブし、ホイールオドメトリを計算して ***nav_msgs/Odometry*** としてパブリッシュします。


### パラメータ
  * ***~/pulse_per_round*** : ロボットのホイール1回展あたり、エンコーダが出力するパルス数です。（単位：パルス/1回転）デフォルトは作者のロボット用に723.24としています。
  * ***~/wheel_diameter*** : ロボットのホイール直径です。（単位：m）デフォルトは作者のロボット用に0.1524m（6インチ）としています。
  * ***~/tread*** : ロボットの左右のホイール間距離です。（単位：m）デフォルトは作者のロボット用に0.289m（28.9cm）としています。
